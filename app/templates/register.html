{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block content %}
<div class="container">
    <h2 class="mt-4">Register</h2>

    <form method="POST" action="{{ url_for('user.register') }}">
        {{ form.hidden_tag() }}
        
        <!-- Username field -->
        <div class="form-group">
            {{ form.username.label(class="form-label") }}
            {{ form.username(class="form-control") }}
        </div>

        <!-- Email field -->
        <div class="form-group">
            {{ form.email.label(class="form-label") }}
            {{ form.email(class="form-control") }}
        </div>

        <!-- Password fields -->
        <div class="form-group">
            {{ form.password.label(class="form-label") }}
            {{ form.password(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.confirm_password.label(class="form-label") }}
            {{ form.confirm_password(class="form-control") }}
        </div>

        <!-- Role selection -->
        <div class="form-group">
            {{ form.role.label(class="form-label") }}
            {{ form.role(class="form-control", id="role-select") }}
        </div>

        <!-- Admin Password field (hidden by default) -->
        <div class="form-group" id="admin-password-field" style="display: none;">
            {{ form.admin_password.label(class="form-label") }}
            {{ form.admin_password(class="form-control") }}
        </div>

        <!-- Submit button -->
        <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
</div>

<script>
    // Show the "Admin Password" field only when "Admin" role is selected
    document.getElementById('role-select').addEventListener('change', function() {
        var adminPasswordField = document.getElementById('admin-password-field');
        if (this.value === 'admin') {
            adminPasswordField.style.display = 'block';
        } else {
            adminPasswordField.style.display = 'none';
        }
    });
</script>
{% endblock %}
