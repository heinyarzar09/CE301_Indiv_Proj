{% extends "base.html" %} {# Inherit from the base template to maintain consistent structure and styles #}

{% block title %}Login{% endblock %} {# Set the title of the page to "Login" for display in the browser tab #}

{% block content %} {# Define the content block to insert specific content for the Login page #}
<div class="container login-container .vh-100"> {# Center and style the login form #}
    <h2 class="text-center mb-4">Login</h2> {# Centered heading with bottom margin for spacing #}

    <!-- Form to handle user login -->
    <form method="POST" action="{{ url_for('user.login') }}"> {# Use POST method to securely submit form data to the login endpoint #}
        {{ form.hidden_tag() }} {# CSRF token for security, generated by Flask-WTF #}

        <!-- Form group for the email input -->
        <div class="form-group mb-3">
            {{ form.email.label(class="form-label") }} {# Render the label for the email field with Bootstrap's form-label class #}
            {{ form.email(class="form-control") }} {# Render the email input field with Bootstrap's form-control class for consistent styling #}
        </div>

        <!-- Form group for the password input with toggle visibility -->
        <div class="form-group mb-3">
            {{ form.password.label(class="form-label") }} {# Render the label for the password field #}
            <div class="input-group">
                {{ form.password(class="form-control", id="password-input") }} {# Render the password input field #}
                <div class="input-group-append">
                    <button type="button" class="btn btn-outline-secondary" onclick="togglePasswordVisibility()" tabindex="-1">
                        <i class="fa fa-eye" id="password-icon"></i> {# Eye icon for visibility toggle #}
                    </button>
                </div>
            </div>
        </div>

        <!-- Forgot Password link -->
        <div class="form-group mb-3">
            <a href="{{ url_for('user.forgot_password') }}" class="forgot-password">Forgot Password?</a>
        </div>

        <!-- Submit button for the login form -->
        <div class="form-group">
            {{ form.submit(class="btn btn-primary w-100") }} {# Full-width button with primary styling #}
        </div>
    </form>
</div>

<style>
    .forgot-password {
        display: block; /* Makes the link take the full width of the parent */
        text-align: left; /* Aligns the text to the left */
    }
</style>

<!-- JavaScript to toggle password visibility -->
<script>
function togglePasswordVisibility() {
    var passwordInput = document.getElementById("password-input");
    var passwordIcon = document.getElementById("password-icon");
    if (passwordInput.type === "password") {
        passwordInput.type = "text";  // Show the password
        passwordIcon.classList.remove("fa-eye");
        passwordIcon.classList.add("fa-eye-slash");
    } else {
        passwordInput.type = "password";  // Hide the password
        passwordIcon.classList.remove("fa-eye-slash");
        passwordIcon.classList.add("fa-eye");
    }
}
</script>

<!-- Include Font Awesome for the eye icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
{% endblock %} {# End of the content block #}
